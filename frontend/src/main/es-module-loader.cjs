/**
 * ESãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ­ãƒ¼ãƒ€ãƒ¼ - CommonJSã‹ã‚‰ESãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’èª­ã¿è¾¼ã‚€ãŸã‚ã®ãƒ–ãƒªãƒƒã‚¸ãƒ•ã‚¡ã‚¤ãƒ«
 * 
 * ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯CommonJSå½¢å¼ã§æ›¸ã‹ã‚Œã€Electronã®ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆã¨ã—ã¦æ©Ÿèƒ½ã—ã¾ã™ã€‚
 * ESãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å½¢å¼ã§æ›¸ã‹ã‚ŒãŸindex.mjsã‚’å‹•çš„importã§èª­ã¿è¾¼ã¿ã¾ã™ã€‚
 */

const path = require('path');

// æ—¥æœ¬èªã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›ã®ãŸã‚ã«æ–‡å­—ã‚³ãƒ¼ãƒ‰ã‚’è¨­å®š
if (process.platform === 'win32') {
  process.env.CHCP = '65001'; // UTF-8ã«è¨­å®š
  try {
    // Windowsç’°å¢ƒã®å ´åˆã€ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ã‚³ãƒ¼ãƒ‰ãƒšãƒ¼ã‚¸ã‚’UTF-8ã«è¨­å®š
    require('child_process').execSync('chcp 65001');
  } catch (e) {
    console.error('ã‚³ãƒ¼ãƒ‰ãƒšãƒ¼ã‚¸ã®è¨­å®šã«å¤±æ•—ã—ã¾ã—ãŸ:', e);
  }
}

console.log('ğŸŒ¸ ESãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ­ãƒ¼ãƒ€ãƒ¼ã‚’èµ·å‹•ã—ã¦ã„ã¾ã™...');

// çµ¶å¯¾ãƒ‘ã‚¹ã§index.mjsã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™
const modulePath = path.resolve(__dirname, 'index.mjs');
// Windowsç’°å¢ƒã§ã¯ãƒ‘ã‚¹ã®ãƒãƒƒã‚¯ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚’ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã«å¤‰æ›
const moduleUrl = `file://${modulePath.replace(/\\/g, '/')}`;

// å‹•çš„importã§ESãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’èª­ã¿è¾¼ã¿ã¾ã™
console.log(`ğŸ”„ ESãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’èª­ã¿è¾¼ã¿ã¾ã™: ${moduleUrl}`);

// ãƒ¡ã‚¤ãƒ³ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
import(moduleUrl).catch(err => {
  console.error('âŒ ESãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', err);
  process.exit(1);
}); 